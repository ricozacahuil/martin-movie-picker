<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Martin Family Movie Picker</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .title {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
        }
        
        .btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            cursor: pointer;
            margin: 5px;
            font-size: 16px;
        }
        
        .btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .btn.active {
            background: #10b981;
        }
        
        .btn.primary {
            background: #f59e0b;
            font-size: 20px;
            padding: 15px 30px;
            font-weight: bold;
        }
        
        .users-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        
        .user-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }
        
        .user-card.current {
            background: #fbbf24;
            color: #1f2937;
            font-weight: bold;
        }
        
        .movie-result {
            background: rgba(16, 185, 129, 0.2);
            border: 2px solid #10b981;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .movie-title {
            font-size: 1.5rem;
            color: #fbbf24;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .movie-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        
        .watched-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 8px;
        }
        
        .watched-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 8px;
            border-radius: 5px;
            font-size: 14px;
        }
        
        .hidden {
            display: none;
        }
        
        select {
            width: 100%;
            padding: 8px;
            border-radius: 5px;
            border: none;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            margin: 5px 0;
        }
        
        select option {
            background: #1f2937;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">üé¨ Martin Family Movie Picker</h1>
            <p id="movieCount">Sample Collection: 12 movies available</p>
        </div>

        <!-- Selection Mode -->
        <div class="card">
            <h2>üë• Selection Mode</h2>
            <button id="randomBtn" class="btn active">üé≤ Random Pick</button>
            <button id="alternatingBtn" class="btn">üîÑ Alternating Turns</button>
            
            <div id="usersSection" class="hidden">
                <h3 style="margin: 15px 0 10px 0;">üëë Turn Order</h3>
                <div class="users-grid" id="usersGrid"></div>
                <p id="turnInfo" style="color: #10b981; font-weight: bold;"></p>
            </div>
        </div>

        <!-- Pick Button -->
        <div class="card" style="text-align: center;">
            <button id="pickBtn" class="btn primary">üé¨ Pick a Movie!</button>
            
            <div id="movieResult" class="movie-result hidden">
                <div id="pickerInfo" style="text-align: right; margin-bottom: 10px; color: #fbbf24;"></div>
                <div class="movie-title" id="movieTitle"></div>
                <div class="movie-details" id="movieDetails"></div>
                <button id="watchedBtn" class="btn" style="background: #10b981;">‚≠ê Mark Watched</button>
                <button id="pickAnotherBtn" class="btn">üé≤ Pick Another</button>
            </div>
        </div>

        <!-- Watched Movies -->
        <div class="card">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <h2>üìÖ Watched Movies (<span id="watchedCount">0</span>)</h2>
                <button id="resetBtn" class="btn" style="background: #ef4444;">üîÑ Reset</button>
            </div>
            <div id="watchedGrid" class="watched-grid">
                <p style="text-align: center; opacity: 0.7;">No movies watched yet!</p>
            </div>
        </div>
    </div>

    <script>
        // Sample movies
        const movies = [
            {
                "Title": "Frozen",
                "thriller": "Kids/Animated",
                "Format": "Blu-ray",
                "3D": "No",
                "Adults Only": "No",
                "Year (Approx)": 2013,
                "Location": 1,
                "Furniture": "Front shelf"
            },
            {
                "Title": "The Avengers",
                "thriller": "Superhero",
                "Format": "Blu-ray",
                "3D": "Yes",
                "Adults Only": "No",
                "Year (Approx)": 2012,
                "Location": 2,
                "Furniture": "Right shelf"
            },
            {
                "Title": "Finding Nemo",
                "thriller": "Kids/Animated",
                "Format": "DVD",
                "3D": "No",
                "Adults Only": "No",
                "Year (Approx)": 2003,
                "Location": 1,
                "Furniture": "Front shelf"
            },
            {
                "Title": "Inception",
                "thriller": "Sci-Fi/Thriller",
                "Format": "Blu-ray",
                "3D": "No",
                "Adults Only": "Yes",
                "Year (Approx)": 2010,
                "Location": 3,
                "Furniture": "Left shelf"
            },
            {
                "Title": "Toy Story 4",
                "thriller": "Kids/Animated",
                "Format": "Digital",
                "3D": "Yes",
                "Adults Only": "No",
                "Year (Approx)": 2019,
                "Location": 4,
                "Furniture": "Digital collection"
            },
            {
                "Title": "The Lion King",
                "thriller": "Family/Musical",
                "Format": "Blu-ray",
                "3D": "No",
                "Adults Only": "No",
                "Year (Approx)": 2019,
                "Location": 2,
                "Furniture": "Right shelf"
            }
        ];

        // App state
        let watchedMovies = JSON.parse(localStorage.getItem('watched') || '[]');
        let currentUserIndex = 0;
        let mode = 'random';
        let selectedMovie = null;
        
        const users = ['Xavier Martin', 'Nancy Martin', 'Nadia Martin', 'Eric Martin', 'Guest'];

        // Get available movies (not watched)
        function getAvailableMovies() {
            return movies.filter(movie => !watchedMovies.includes(movie.Title));
        }

        // Update movie count
        function updateCount() {
            const available = getAvailableMovies();
            document.getElementById('movieCount').textContent = 
                `Sample Collection: ${available.length} of ${movies.length} movies available`;
        }

        // Set mode
        function setMode(newMode) {
            mode = newMode;
            document.getElementById('randomBtn').classList.toggle('active', mode === 'random');
            document.getElementById('alternatingBtn').classList.toggle('active', mode === 'alternating');
            document.getElementById('usersSection').classList.toggle('hidden', mode === 'random');
            updateUsers();
        }

        // Update users display
        function updateUsers() {
            if (mode === 'alternating') {
                const grid = document.getElementById('usersGrid');
                grid.innerHTML = '';
                
                users.forEach((user, index) => {
                    const card = document.createElement('div');
                    card.className = `user-card ${index === currentUserIndex ? 'current' : ''}`;
                    card.textContent = `${index === currentUserIndex ? 'üëë ' : ''}${user}`;
                    grid.appendChild(card);
                });
                
                const nextUser = users[(currentUserIndex + 1) % users.length];
                document.getElementById('turnInfo').textContent = 
                    `Current: ${users[currentUserIndex]} ‚Ä¢ Next: ${nextUser}`;
            }
        }

        // Pick random movie
        function pickMovie() {
            const available = getAvailableMovies();
            if (available.length === 0) {
                alert('No movies available! Reset watched list or add more movies.');
                return;
            }

            const randomIndex = Math.floor(Math.random() * available.length);
            selectedMovie = available[randomIndex];
            
            // Show result
            document.getElementById('movieResult').classList.remove('hidden');
            document.getElementById('movieTitle').textContent = selectedMovie.Title;
            
            if (mode === 'alternating') {
                document.getElementById('pickerInfo').textContent = 
                    `üëë ${users[currentUserIndex]}'s Choice`;
                currentUserIndex = (currentUserIndex + 1) % users.length;
                updateUsers();
            } else {
                document.getElementById('pickerInfo').textContent = 'üé≤ Random Pick';
            }
            
            document.getElementById('movieDetails').innerHTML = `
                <div>üé≠ Genre: ${selectedMovie.thriller}</div>
                <div>üíø Format: ${selectedMovie.Format}</div>
                <div>üìÖ Year: ${selectedMovie['Year (Approx)']}</div>
                <div>üï∂Ô∏è 3D: ${selectedMovie['3D']}</div>
                <div>üìç Location: ${selectedMovie.Location}</div>
                <div>ü™ë Storage: ${selectedMovie.Furniture}</div>
            `;
        }

        // Mark as watched
        function markWatched() {
            if (selectedMovie) {
                watchedMovies.push(selectedMovie.Title);
                localStorage.setItem('watched', JSON.stringify(watchedMovies));
                updateWatchedDisplay();
                updateCount();
                document.getElementById('movieResult').classList.add('hidden');
                selectedMovie = null;
            }
        }

        // Update watched display
        function updateWatchedDisplay() {
            document.getElementById('watchedCount').textContent = watchedMovies.length;
            const grid = document.getElementById('watchedGrid');
            
            if (watchedMovies.length === 0) {
                grid.innerHTML = '<p style="text-align: center; opacity: 0.7;">No movies watched yet!</p>';
            } else {
                grid.innerHTML = '';
                watchedMovies.forEach(title => {
                    const item = document.createElement('div');
                    item.className = 'watched-item';
                    item.textContent = title;
                    grid.appendChild(item);
                });
            }
        }

        // Reset watched
        function resetWatched() {
            if (confirm('Reset all watched movies?')) {
                watchedMovies = [];
                localStorage.setItem('watched', JSON.stringify(watchedMovies));
                updateWatchedDisplay();
                updateCount();
                currentUserIndex = 0;
                updateUsers();
            }
        }

        // Event listeners
        document.getElementById('randomBtn').addEventListener('click', () => setMode('random'));
        document.getElementById('alternatingBtn').addEventListener('click', () => setMode('alternating'));
        document.getElementById('pickBtn').addEventListener('click', pickMovie);
        document.getElementById('watchedBtn').addEventListener('click', markWatched);
        document.getElementById('pickAnotherBtn').addEventListener('click', pickMovie);
        document.getElementById('resetBtn').addEventListener('click', resetWatched);

        // Initialize
        updateCount();
        updateWatchedDisplay();
        updateUsers();

        console.log('üé¨ Martin Family Movie Picker loaded with', movies.length, 'sample movies');
    </script>
</body>
</html>